<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>A Blog by James</title>
    <link rel="canonical" href="https://deplicator.github.io">
    <link rel="stylesheet" type="text/css" href="https://deplicator.github.io/styles/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://deplicator.github.io/styles/bootstrap-theme.min.css">
    <link rel="stylesheet" type="text/css" href="https://deplicator.github.io/styles/jqcloud.css">
    <link rel="stylesheet" type="text/css" href="https://deplicator.github.io/styles/ionicons.min.css">
    <link rel="stylesheet" type="text/css" href="https://deplicator.github.io/styles/main.css">
    <script src="https://deplicator.github.io/scripts/analytics.js"></script>
    <script src="https://deplicator.github.io/scripts/jquery-2.1.4.min.js"></script>
    <script src="https://deplicator.github.io/scripts/jquery-jqcloud.js"></script>
    <script src="https://deplicator.github.io/scripts/bootstrap.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <ul class="nav navbar-nav navbar-toggle collapsed pull-right" aria-expanded="false">
                    <li><a class="ion-link" href="http://geekwagon.net"></a><li>
                </ul>
                <h1><a href="https://deplicator.github.io">A Blog by James</a></h1>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav pull-right" id="contact">
                    <li>
                        <a class="ion-ios-email-outline" title="Email is one of the best ways to contact me." href="mailto:james@geekwagon.net"></a>
                    </li>
                    <li>
                        <a class="ion-social-facebook-outline" href="https://www.facebook.com/deplicator"></a>
                    </li>
                    <li>
                        <a
                            class="ion-social-github-outline"
                            title="I don't always put Facebook before GitHub, but when I do it's because they're in alphabetical order."
                            href="https://github.com/deplicator">
                        </a>
                    </li>
                    <li>
                        <a class="ion-social-googleplus-outline" href="https://plus.google.com/100479632575151546186?rel=author"></a>
                    </li>
                    <li>
                        <a class="ion-social-linkedin-outline" href="https://www.linkedin.com/in/pryorjames">
                        </a>
                    </li>
                    <li>
                        <a class="ion-link" href="http://geekwagon.net"></a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="col-sm-10 col-sm-offset-1 col-lg-8 col-lg-offset-2">
            <article>
                <div class="article-header">
                    <div class="col-xs-3">
                        <span class="icon ion-arrow-left-a"></span><a href="../../"> back</a>
                    </div>
                    <div class="col-xs-6 text-center text-nowrap">
                        <span class="icon ion-calendar"></span> Sunday, February 16, 2014
                    </div>
                    <div class="col-xs-3 text-right">
                        <span class="glyphicon glyphicon-comment"></span><a href="#disqus_thread"> comments</a>
                    </div>
                </div>



                <div class="post-content">
                    <h2>Non-stop Bitcoin Mining</h2>
                    <p><img src="https://deplicator.github.io/images/itmines.jpg" alt="It mines!" title="Screen shot of the log file, how interesting and inefficient."></p>
<p>It&#39;s no secret I mine Bitcoins, but I don&#39;t bring up that I&#39;m not very good for the obvious geek
creed reasons. Today I finally made a change to my mining rig that I hope will end the occasional
dreaded <em>&quot;Idle Miner Notification&quot;</em> from <a href="http://btcguild.com/">btcguild.com</a>.</p>
<!-- more -->
<p>I have small mining setup, a mix of Block Eruptors and a single Butterfly Labs Jalapeno. We started
having strange Internet connection issues, and I immediately assumed it was AT&amp;T&#39;s fault (to be fair
it usually is). Also about the same time bfgminer reported the Jalapeno was
<code style="color: red">sick</code>. Never crossed my mind these issues were related, but once I
sent the Jalapeno off to be RMA&#39;d all most of our Internet problems cleared up.</p>
<p>With the Jalapeno gone, bfgminer ran with no problems. With the Jalapeno the program would
inexplicably give up, even with the new one back in action this still happens. As a good
administrator I&#39;m sure I could have looked for a log or an error message or something, but it is
very easy to putty back in, hit the up arrow, enter, ctrl+A+D, and go on with life. I can even do it
remotely with <a href="http://www.teamviewer.com/en/index.aspx">TeamViewer</a> because my home PC is on almost all the time (thanks for nothing
logmein). Sometimes it goes for months without my need to intervene, other times only hours (and in
the middle of the night).</p>
<p>After nearly a year of manual restarts and an immeasurably small loss of <a href="http://bitcoin.stackexchange.com/a/117">Satoshis</a>, I&#39;ve
<a href="https://gist.github.com/deplicator/9040062">finally made a script</a> to continually check if bfgminer is running and restart it if it&#39;s
not. My apologies for not giving credit where it is due, most of this script came from a post on
stackoverflow, but I&#39;m not sure where.</p>
<p>It is far from perfect, but so far so good. I&#39;d love to hear anyone&#39;s two <del>cents</del> Satoshis
on how to improve it. I also hope this is an aid to other small time miners.</p>
<p>EDIT: March 4, 2014<br>It didn&#39;t take me long to realize this was better to run as a cronjob. The biggest problem I had was
multiple screens running, so I changed it over and made my log file a little better.</p>
<p>My first attempt was to remove the pause line and add the script as a cronjob that runs every 5
minutes.</p>
<p>The <a href="https://help.ubuntu.com/community/CronHowto">Ubuntu Wiki CronHowto</a> was helpful, especially the <strong>Enable User Level Cron</strong> section.</p>
<p>I also update the log file to show a time. For weeks I thought everything was good, because you
know, nothing went wrong. I was suspicious something wasn&#39;t quite right because the log file never
showed the miners being restarted.</p>
<p>Today the power went out, and when the server came back on I expected miners to be running within 5
minutes... they did not. I dug a little deeper and <a href="http://ubuntuforums.org/showthread.php?t=1503706&amp;p=9424083#post9424083">this comment on the Ubuntu forms</a>
pointed out my issue. There were a lot of comments about making sure the script was executable and
user level cron was set up. My problem specifically had to do with how <a href="http://linux.die.net/man/1/screen">screen</a> works. I
needed a -d for detach. The new script is in the <a href="https://gist.github.com/deplicator/9040062">gist</a>, it&#39;s been tested and rocks along
well.</p>

                </div>
                <div class="tags"><span class="icon ion-ios-pricetags-outline"></span> <span class="tag"><a href="topics/bitcoin.html">bitcoin</a></span> <span class="tag"><a href="topics/linux.html">linux</a></span> <span class="tag"><a href="topics/scripts.html">scripts</a></span> </div>
            </article>
            <div id="disqus_thread"></div>
        </div>

        <!-- Enlarged Image Modal -->
        <div class="modal fade" id="large-image-modal">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Modal title</h4>
                    </div>
                    <div class="modal-body">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES * * */
            var disqus_shortname = 'geekwagon';
            var disqus_identifier = 'blog/non-stop-bitcoin-mining';
            var disqus_title = 'blog/non-stop-bitcoin-mining';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>
            Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
        </noscript>
        <script src="https://deplicator.github.io/scripts/main.js"></script>
    </div>
</body>
</html>
